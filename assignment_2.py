# -*- coding: utf-8 -*-
"""Copy of Assignment 2.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1HMk-O2JY9CysrP5tFk9cs0nM_JbQhBGM

![](https://i.imgur.com/0AUxkXt.png)

# SF Salaries Exercise 

Explore San Francisco city employee salary data.

## Overview

One way to understand how a city government works is by looking at who it employs and how its employees are compensated. This data contains the names, job title, and compensation for San Francisco city employees on an annual basis from 2011 to 2014.



Just follow along and complete the tasks outlined in bold below. The tasks will get harder and harder as you go along.

## Resources

[Pandas API Reference](https://pandas.pydata.org/pandas-docs/stable/api.html)

[NumPy Reference](https://docs.scipy.org/doc/numpy/reference/)

[Visualization with Seaborn](https://jakevdp.github.io/PythonDataScienceHandbook/04.14-visualization-with-seaborn.html)

**Import libraries**
"""

import pandas as pd
import seaborn as sns

"""**Read `Salaries.csv` as a dataframe called `sal`.**"""

link = "https://s3-ap-southeast-1.amazonaws.com/intro-to-ml-minhdh/Salaries.csv"
sal = pd.read_csv(link)

"""**Check the head of the DataFrame.**"""

sal.head(10)

"""**Use the .info() method to find out how many entries there are.**"""

sal.info()

"""**What is the average BasePay ?**

Keyword: [mean](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.mean.html)
"""

# Your Code Here
sal['BasePay'].mean()

"""**What is the lowest and highest amount of BasePay?**

Keyword: 
[min](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.min.html) , 
[max](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.max.html)
"""

# Your Code Here
sal['BasePay'].min()

# Your Code Here
sal['BasePay'].max()

"""**How about OvertimePay in the dataset? What is the average, lowest, highest amount?**"""

# Your Code Here
sal['OvertimePay'].mean()

# Your Code Here
sal['OvertimePay'].min()

# Your Code Here
sal['OvertimePay'].max()

"""**What is the job title of  JOSEPH DRISCOLL ? Note: Use all caps, otherwise you may get an answer that doesn't match up (there is also a lowercase Joseph Driscoll).**"""

# Your Code Here
sal[sal['EmployeeName'] == 'JOSEPH DRISCOLL']['JobTitle']

# Now try to select Employees who have name "GARY JIMENEZ"
# Your Code Here
sal[sal['EmployeeName'] == 'GARY JIMENEZ']

"""**How much does JOSEPH DRISCOLL make (including benefits)?**"""

# Your Code Here
sal[sal['EmployeeName'] == 'JOSEPH DRISCOLL']['TotalPayBenefits']

"""**What is the name of highest paid person (including benefits)?**"""

# Your Code Here
sal[sal['TotalPayBenefits'] == sal['TotalPayBenefits'].max()]['EmployeeName']

"""**What is the name of lowest paid person (including benefits)? Do you notice something strange about how much he or she is paid?**"""

# Your Code Here
sal[sal['TotalPayBenefits'] == sal['TotalPayBenefits'].min()]['EmployeeName']

"""### His benefits were negative

**What was the average (mean) BasePay of all employees per year? (2011-2014) ?**
Keyword: _groupby_
"""

# Your Code Here
sal.groupby('Year')['BasePay'].mean()

"""**How many unique job titles are there?**

Keyword: _unique, nunique_
"""

# Your Code Here
sal['JobTitle'].nunique()

"""**What are the top 5 most common jobs?**

Keyword: *value_counts*
"""

# Your Code Here
sal['JobTitle'].value_counts().head(5)

"""**How many Job Titles were represented by only one person in 2013? (e.g. Job Titles with only one occurence in 2013?)**"""

# Your Code Here
(sal[sal['Year'] == 2013]['JobTitle'].value_counts() == 1).sum()

"""**How many people have the word Chief in their job title?**

> Indented block
"""

# Your Code Here
sal['JobTitle'].str.lower().str.contains('chief').sum()

"""## Data Visualization

**Implement seaborn's countplot with x='Year'**
"""

sns.countplot(x = "Year", data=sal)

"""**Implement seaborn's distplot for BasePay of Year 2011**"""

sns.distplot(sal[sal["Year"] == 2011]["BasePay"], bins = 30);

"""**How about other Year**"""

# Your Code Here for 2012
sns.distplot(sal[sal["Year"] == 2012]["BasePay"], bins = 30);

# Your Code Here for 2013
sns.distplot(sal[sal["Year"] == 2013]["BasePay"], bins = 30);

# Your Code Here for 2014
sns.distplot(sal[sal["Year"] == 2014]["BasePay"], bins = 30);

"""## Bonus

**Visualize top 5 Jobs with BasePay, Benefits and OvertimePay**

Keyword: *index, isin, groupby, mean, plot*
"""

# Your Code Here
sns.plot()

# Your Code Here

"""**Fun Fact: Is there a correlation between length of the Job Title string and Salary?**

*Hint: corr()*
"""

# Your Code Here
data = sal[['TotalPayBenefits']]
data['JobTitleLength'] = sal['JobTitle'].str.len()
data.corr('pearson')

"""# Great Job!"""